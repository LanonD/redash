(function(j){function q(){var a=arguments[0];if(1===arguments.length)return a;for(var b=1;b<arguments.length;b++){var c=arguments[b],m;for(m in c)a[m]=c[m]}return a}function u(a){return null===a||void 0===a||""===a}var r={monthNames:"January February March April May June July August September October November December".split(" "),shortMonthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),repeatLevels:{low:[0,10],"medium-low":[10,20],medium:[20,30],"medium-high":[30,40],high:[40,
60],hot:[60,70],"extra-hot":[70,100]},labels:{time:"Time",people:"People",weekOf:"Week of"},timeInterval:"monthly",drawEmptyCells:!0,rawNumberOnHover:!0,initialIntervalNumber:1,classPrefix:"cornelius-",formatHeaderLabel:function(a){return(this.initialIntervalNumber-1+a).toString()},formatDailyLabel:function(a,b){a.setDate(a.getDate()+b);return this.monthNames[a.getMonth()]+" "+a.getDate()+", "+(a.getYear()+1900)},formatWeeklyLabel:function(a,b){a.setDate(a.getDate()+7*b);return this.labels.weekOf+
" "+this.shortMonthNames[a.getMonth()]+" "+a.getDate()+", "+(a.getYear()+1900)},formatMonthlyLabel:function(a,b){a.setMonth(a.getMonth()+b);return this.monthNames[a.getMonth()]+" "+(a.getYear()+1900)},formatYearlyLabel:function(a,b){return a.getYear()+1900+b}},f=r,c=function(a){if(!(initialDate=a.initialDate))throw Error("The initialDate is a required argument");delete a.initialDate;this.initialDate=initialDate;this.config=q({},c.getDefaults(),a||{})};q(c,{getDefaults:function(){return f},setDefaults:function(a){f=
q({},r,a)},resetDefaults:function(){f=r},draw:function(a){var b=new c(a),j=a.cohort,m=a.container,h=function(a,n){n=n||{};a=document.createElement(a);if(className=n.className){delete n.className;var b=a,d;d=[];var c=className.split(/\s+/),h;for(h in c)d.push(e.classPrefix+c[h]);d=d.join(" ");b.className=d}if(!u(textContent=n.text))delete n.text,a.textContent=textContent.toString();for(var k in n)if(opt=n[k])a[k]=opt;return a},q=function(a,b,c){a=new Date(a.getTime());var d=null;if("daily"===b)d="formatDailyLabel";
else if("weekly"===b)d="formatWeeklyLabel";else if("monthly"===b)d="formatMonthlyLabel";else if("yearly"===b)d="formatYearlyLabel";else throw Error("Interval not supported");return e[d].call(e,a,c)};if(!j)throw Error("Please provide the cohort data");if(!m)throw Error("Please provide the cohort container");var e=b.config,r=b.initialDate,b=h("div",{className:"container"}),f=h("table",{className:"table"});f.appendChild(function(a){var b=h("tr");a=a[0].length;b.appendChild(h("th",{text:e.labels.time,
className:"time"}));for(var c=0;c<a&&!(c>e.maxColumns);c++){var d=0===c?e.labels.people:e.formatHeaderLabel(c);b.appendChild(h("th",{text:d,className:"people"}))}return b}(j));f.appendChild(function(a){for(var b=document.createDocumentFragment(),c=e.maxRows?a.length-e.maxRows:0;c<a.length;c++){var d=h("tr"),j=a[c],m=j[0];d.appendChild(h("td",{className:"label",textContent:q(r,e.timeInterval,c)}));for(var k=0;k<a[0].length&&!(k>e.maxColumns);k++){var f=j[k],g;if(0===k)g=f;else{g=f;var l=m;g="[object Number]"===
Object.prototype.toString.call(g)&&0<l?(100*(g/l)).toFixed(2):"[object Number]"===Object.prototype.toString.call(g)?"0.00":void 0}var p=g;g={};if(u(p))e.drawEmptyCells&&(g={text:"-",className:"empty"});else{g=p;f=0<k&&e.rawNumberOnHover?f:null;if(0===k)l="people";else a:{var l=e.repeatLevels,p=p&&parseFloat(p),v=null,t=["percentage"],s=void 0;for(s in l){if(p>=l[s][0]&&p<l[s][1]){t.push(s);l=t.join(" ");break a}v=s}t.push(v);l=t.join(" ")}g={text:g,title:f,className:l}}d.appendChild(h("td",g))}b.appendChild(d)}return b}(j));
(title=e.title)&&b.appendChild(h("div",{text:title,className:"title"}));b.appendChild(f);m.innerHTML="";m.appendChild(b);return a.container}});"undefined"!==typeof jQuery&&null!==jQuery&&(jQuery.fn.cornelius=function(a){return this.each(function(){a.container=this;return c.draw(a)})});j.exports?j.exports=c:j.Cornelius=c})("function"===typeof module?module:window);
